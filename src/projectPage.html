<!DOCTYPE HTML>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable: 0;">
        <link rel="stylesheet" href="../styles/styles.css">
        <title>Projects</title>
    </head>
    <body>
        <div class = "projects--carousel-parent" id = "viewParent">
            <div id = "leftView">
            </div>
            <div id = "primaryView">
            </div>
            <div id = "rightView">
            </div>
        </div>
        <div class = "nav-bar">
            <a href='interpreterPage.html'>
                BrainF*ck
            </a>
            <a href = '../index.html'>
                Home
            </a>
            <a href='statsPage.html'>
                Stats
            </a>
            <a href='../data/Resume.pdf' target = "_blank">
                Resume
            </a>
        </div>
    </body>
</html>
<script>
    //This assigns three view elements, and a viewParent
    //viewParent is a div which contains leftView, primaryView, and rightView 
    //to switch which view is onscreen, I initiate a css transition which moves the parent Div to the left for the length of one view, 
    //and then, once the scroll is complete, the css transition is deactivated, and the contents of the div which is on screen(right or left)
    //are assigned to the parent div
    const viewParent = document.getElementById("viewParent");
    const primaryView = document.getElementById("primaryView");
    const leftView = document.getElementById("leftView");
    const rightView = document.getElementById("rightView")
    //contains every possible project state
    //TODO : update states to contain html code which provides a visual recap of each project
    const viewStates = [];
    viewStates.push(
    `<div class = "projects--project-wrapper border-standard">
        <div class = "projects--project-image-flex-wrapper">
            <div class = "projects--project-image-wrapper">
                <img src="../data/photonScreenshot.PNG" alt="In Game" class = "projects--project-image border-standard">
            </div>
        </div>
        <div class = "projects--project-wrapper-right">
            <label class = "header-center">
                Photon : The Ultimate Game on Planet Earth
            </label>
            <div class = "projects--project-text border-standard">
                Worked with a team to design and implement a clone of the laser tag arena software "Photon" through a series of Scrum Sprints. Acted as a training tool to practice utilization of formalized design architectures, and design methodology in CSCE 3513 - Software Engineering.
                <br><br>
                Technology Used : 
                <br>
                Java
                <br>
                Supabase
                <br><br>
                <a href = "https://github.com/huener/SE-photon" target = "_blank">
                    Github Page
                </a>
            </div>
        </div>
    </div>`,
    `<div class = "projects--project-wrapper border-standard">
        <div class = "projects--project-image-flex-wrapper">
            <div class = "projects--project-image-wrapper">
                <img src="../data/minesWiiperGame.PNG" alt="In Game" class = "projects--project-image border-standard">
            </div>
        </div>
        <div class = "projects--project-wrapper-right">
            <label class = "header-center">
                MinesWiiper
            </label>
            <div class = "projects--project-text border-standard">
                Created a port of the windows game "Minesweeper" for the Nintendo Wii. Implemented features never before created on a homebrew Minesweeper port, such as custom board sizes, accurate first-click protections, and zooming / panning capabilities. <br><br>Technology Used : 
                <br>
                DevKitPPC 
                <br>
                LibWiiSprite
                <br>
                C++
                <br><br>
                <a href = "https://github.com/Tacolover93/MinesWiiper" target = "_blank">
                    Github Page
                </a>
                <br><br>
                <a href = "https://wiibrew.org/wiki/MinesWiiper" target = "_blank">
                    WiiBrew Page
                </a>
            </div>
        </div>
    </div>
    `,
    `<div class = "projects--project-wrapper border-standard">
        <div class = "projects--project-image-flex-wrapper">
            <div class = "projects--project-image-wrapper">
                <img src="../data/eShopApp.png" alt="eShop App" class = "projects--project-image border-standard">
            </div>
        </div>
        <div class = "projects--project-wrapper-right">
            <label class = "header-center">
                eShop
            </label>
            <div class = "projects--project-text border-standard">
                For the JBHunt 2023 Spring Hackathon, me and my team created an app which allows the user to scan barcodes of items and returns a letter score to describe the sustainability of the company which created the item. Scores are created through a combination of AI prompts and a user database of scores. An accompanying website may be used to view the items which the user has previously scanned.
                <br><br>
                Technology Used : 
                <br>
                Android Studio 
                <br>
                HTML/CSS
                <br>
                Python REST API
                <br>
                ChatGPT API
                <br>
                Supabase - an Open Source Firebase Alternative
                <br><br>
                Won 3rd place out of 30 teams which participated
                <br><br>
                <a href = "https://github.com/huener/hackathon-spring23"> 
                    Github Page 
                </a>
            </div>
        </div>
    </div>`,
    `<div class = "projects--project-wrapper border-standard">
        <div class = "projects--project-image-flex-wrapper">
            <div class = "projects--project-image-wrapper">
                <img src="../data/trashBotApp.png" alt="Me!!" class = "projects--project-image border-standard">
            </div>
            <div class = "projects--project-image-wrapper">
                <img src="../data/trashbotBot.jpg" alt="Me!!" class = "projects--project-image border-standard">
            </div>
        </div>
        <div class = "projects--project-wrapper-right">
            <label class = "header-center">
                TrashBot
            </label>
            <div class = "projects--project-text border-standard">
                For the JBHunt 2022 Fall Hackathon, me and my team created a device which is able to detect when a trashcan is filled, and alert the user in a way which would force them to take the trash out due to sheer annoyance.
                <br><br>
                Technology Used : 
                <br>
                Android Studio 
                <br>
                HTML/CSS
                <br>
                Python REST API
                <br>
                Raspberry Pi
                <br>
                Arduino
                <br><br>
                Won 4th place out of 24 teams which participated
                <br><br>
                <a href = "https://github.com/joseph-bergin/Hackathon-2022" target = "_blank">
                    Github Page
                </a>
            </div>   
        </div>
    </div>`);
    let buttonsHTML = 
    `<div class = "spacing-20px"></div>
    <div class = "projects--button-parent">
        <div class = "button-30-percent border-standard prevent-selection" onclick = "scrollViewLeft()">
            ←
        </div>
        <div class = "button-30-percent border-standard prevent-selection" onclick = "scrollViewRight()">
            →
        </div>
    </div>
    <div class = "spacing-70px"></div>
    `;
    let currState = 1;
    leftView.innerHTML = viewStates[currState - 1] + buttonsHTML;
    primaryView.innerHTML = viewStates[currState] + buttonsHTML;
    rightView.innerHTML = viewStates[currState + 1] + buttonsHTML;
    let active = false;
    
    const query = window.matchMedia("(width > 1175px)");
    query.addListener(portraitView);
    window.addEventListener('resize', fixRatios);
    window.addEventListener("load", (event) => {
        portraitView(query);
    });

    async function scrollViewRight()
    {
        if(!active)
        {
            let buttons = document.querySelector(".projects--button-parent");
            active = true;
            window.scrollTo({top: 0, behavior: 'smooth'});
            if(window.pageYOffset > 0)
            {
                await sleep(500);
            }
            fixRatios("#rightView");
            viewParent.classList.add('scrollViewLeft');
            document.body.style.overflow = "hidden";
            await sleep(1010);
            document.body.style.overflow = "scroll";
            currState += 1;
            if(currState > viewStates.length - 1)
                currState = 0;
            refreshViews();
            viewParent.classList.remove('scrollViewLeft')
            active = false;
        }
    }
    async function scrollViewLeft()
    {
        if(!active)
        {
            let buttons = document.querySelector(".projects--button-parent");
            active = true;
            window.scrollTo({top: 0, behavior: 'smooth'});
            if(window.pageYOffset > 0)
            {
                await sleep(500);
            }
            fixRatios("#leftView");
            viewParent.classList.add('scrollViewRight');
            document.body.style.overflow = "hidden";
            await sleep(1010);
            document.body.style.overflow = "scroll";
            currState -= 1;
            if(currState < 0)
                currState = viewStates.length - 1;
            refreshViews();
            viewParent.classList.remove('scrollViewRight')
            active = false;
        }
    }
    function sleep(ms) 
    {
        return new Promise(resolve => setTimeout(resolve, ms));
    }
    function refreshViews()
    {
        if(currState < 0)
        {
            currState = viewStates.length - 1 + buttonsHTML;
        }
        if(currState + 1 < viewStates.length)
        {
            rightView.innerHTML = viewStates[currState + 1] + buttonsHTML;
        }
        else
        {
            rightView.innerHTML = viewStates[0] + buttonsHTML;
        }
        if(currState - 1 >= 0)
        {
            leftView.innerHTML = viewStates[currState - 1] + buttonsHTML;
        }
        else
        {
            leftView.innerHTML = viewStates[viewStates.length - 1] + buttonsHTML;
        }
        primaryView.innerHTML = (viewStates[currState] + buttonsHTML);
        portraitView(query);
    }
    function portraitView(query)
    {
        if(query.matches)
        {
            let images = document.querySelectorAll("img");
            for(const image of images){
                image.style.height = "auto";
                image.style.width = "auto";
                image.style.maxHeight = "480px";
                image.style.maxWidth = "90%";
            }
        }
        else
        {
            let images = document.querySelectorAll("img");
            for(const image of images){
                
                image.style.height = "20em";
                image.style.width = (parseInt(image.style.height) * ((image.naturalWidth) / image.naturalHeight)).toString() + "em";
                image.style.maxWidth = "97.5%";
            }
            
        }
        fixRatios("#primaryView");
        //image.style.width = image.height * ((image.naturalWidth) / image.naturalHeight);
    }
    
    //fixes a LOT of weird styling problems whenever the page is resized
    function fixRatios(viewWindow = "#primaryView"){
        if(viewWindow == "[object Event]")
            viewWindow = "#primaryView"; 
        if(!query.matches){
            let images = document.querySelectorAll(viewWindow + "> .projects--project-wrapper > .projects--project-image-flex-wrapper > .projects--project-image-wrapper > img");
            for(const image of images)
            {
                image.style.height = (image.offsetWidth * ((image.naturalHeight) / image.naturalWidth)).toString() + "px";
            }
            let projectWindow = document.querySelector(viewWindow + " > .projects--project-wrapper");
            let title = document.querySelector(viewWindow + " > .projects--project-wrapper > .projects--project-wrapper-right > .header-center");
            let text = document.querySelector(viewWindow + " > .projects--project-wrapper > .projects--project-wrapper-right > .projects--project-text");
            let finalHeight = title.offsetHeight;
            finalHeight = finalHeight + text.offsetHeight;
            let maxImageHeight = 0;
            for(const image of images)
            {
                if(window.matchMedia("(width <= 656px)").matches)
                {
                    finalHeight = finalHeight + image.offsetHeight;
                }
                else
                {
                    maxImageHeight = image.offsetHeight;
                }
            }
            finalHeight = finalHeight + maxImageHeight;
            projectWindow.style.height = finalHeight.toString() + "px"; 
        }
        else{
            let images = document.querySelectorAll(viewWindow + "> .projects--project-wrapper > .projects--project-image-flex-wrapper > .projects--project-image-wrapper > img");
            let projectWindow = document.querySelector(viewWindow + " > .projects--project-wrapper");
            let title = document.querySelector(viewWindow + " > .projects--project-wrapper > .projects--project-wrapper-right > .header-center");
            let text = document.querySelector(viewWindow + " > .projects--project-wrapper > .projects--project-wrapper-right > .projects--project-text");
            let finalHeight = 0;
            for(const image of images)
            {
                if(image.offsetHeight > finalHeight)
                {
                    finalHeight = image.offsetHeight;
                }
            }
            if((title.offsetHeight + text.offsetHeight) > finalHeight)
            {
                finalHeight = title.offsetHeight + text.offsetHeight ;
            }
            console.log(text.offsetHeight);
            projectWindow.style.height = "calc(" + finalHeight.toString() + "px + 2em)"; 
        }
    }
    
    function getPosition(elem){
        var dims = {offsetLeft:0, offsetTop:0};
        do {
            dims.offsetLeft += elem.offsetLeft;
            dims.offsetTop += elem.offsetTop;
        } while (elem = elem.offsetParent);

        return dims;
    }
</script>